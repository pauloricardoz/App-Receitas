{"ast":null,"code":"var _jsxFileName = \"/home/paulo/Projects_myself/JS/sd-05-recipes-app-11-base/src/Components/NewProcesso.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport propTypes from 'prop-types';\nimport blackHeart from \"../images/blackHeartIcon.svg\";\nimport whiteHeart from \"../images/whiteHeartIcon.svg\";\nimport shareIcon from \"../images/shareIcon.svg\";\nimport '../CSS/TelaReceitaProcesso.css';\nimport { convertFoodDone } from './DetalhesComida';\nimport { fotoPrincipal, addFavorite } from './NewProcessoFunctions';\nexport function convertFavorite(details, setFavority) {\n  let type = 'Drink';\n\n  if (details.idMeal) {\n    type = 'Meal';\n  }\n\n  const saida = {\n    id: details[`id${type}`],\n    type: type === 'Drink' ? 'bebida' : 'comida',\n    category: details.strCategory,\n    alcoholicOrNot: type === 'Meal' ? '' : 'Alcoholic',\n    name: details[`str${type}`],\n    image: details[`str${type}Thumb`],\n    area: details.strArea !== undefined ? details.strArea : ''\n  };\n  addFavorite(saida, setFavority);\n  return saida;\n} // HA https://www.codegrepper.com/code-examples/basic/copy+string+to+clipboard+javascript\n\nexport function CopyURL() {\n  const endereco = window.location.toString();\n  const index = endereco.indexOf('/in-progress');\n  window.navigator.clipboard.writeText(endereco.substring(0, index));\n}\n\nfunction funcLinks(details, favority, setFavority, copiador, copy) {\n  let title = details.strMeal;\n  if (details.strDrink) title = details.strDrink;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"campoTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"recipe-title\",\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, title), /*#__PURE__*/React.createElement(Link, {\n    onClick: () => convertFavorite(details, setFavority),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: favority ? blackHeart : whiteHeart,\n    alt: \"like icon\",\n    className: \"icon\",\n    \"data-testid\": \"favorite-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    onClick: () => {\n      copiador(true);\n      CopyURL();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: shareIcon,\n    alt: \"like icon\",\n    className: \"icon\",\n    \"data-testid\": 'share-btn',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  })), copy ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, \"Link copiado!\") : null);\n}\n\nfunction createBasicLocal(details) {\n  const type = details.idMeal ? 'Meal' : 'Drink';\n  const chave = details.idMeal ? 'meals' : 'cocktails';\n\n  if (localStorage.getItem('inProgressRecipes') === null) {\n    localStorage.setItem('inProgressRecipes', JSON.stringify({\n      meals: {},\n      cocktails: {}\n    }));\n  }\n\n  return {\n    type,\n    chave\n  };\n}\n\nfunction teste(details) {\n  const {\n    type,\n    chave\n  } = createBasicLocal(details);\n  const localSAtual = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  if (!localSAtual[chave][details[`id${type}`]]) return [];\n  const ingredientes = localSAtual[chave][details[`id${type}`]];\n  return ingredientes;\n}\n\nfunction funcIngredientsChecks(used, details, i) {\n  return used.includes(details[`strIngredient${i}`]);\n}\n\nexport function funcIngredients(ingredients, detalhes) {\n  const used = teste(detalhes);\n\n  for (let i = 1; i < 20; i += 1) {\n    if (detalhes[`strIngredient${i}`] !== null && detalhes[`strIngredient${i}`] !== '' && detalhes[`strIngredient${i}`] !== undefined) {\n      ingredients.push({\n        ingrediente: detalhes[`strIngredient${i}`],\n        quantidade: detalhes[`strMeasure${i}`],\n        checked: funcIngredientsChecks(used, detalhes, i)\n      });\n    }\n  }\n\n  return ingredients;\n}\n\nfunction updateUsedIngredients(details, setDone, novosIngredientes) {\n  const {\n    type,\n    chave\n  } = createBasicLocal(details);\n  const localSAtual = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  if (!localSAtual[chave][details[`id${type}`]]) return [];\n  const ingredientes = localSAtual[chave][details[`id${type}`]];\n\n  if (ingredientes.length === novosIngredientes.length) {\n    setDone(true);\n  }\n\n  return ingredientes;\n}\n\nfunction changeStorage(details, final) {\n  const {\n    type,\n    chave\n  } = createBasicLocal(details);\n  const localSAtual = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  console.log(localSAtual[chave][details[`id${type}`]]);\n  const elements = document.getElementsByClassName('ingredient-step');\n  localSAtual[chave][details[`id${type}`]] = [];\n  let total = 0;\n  let used = 0;\n\n  for (let i = 0; i < elements.length; i += 1) {\n    total += 1;\n\n    if (elements[i].checked === true) {\n      localSAtual[chave][details[`id${type}`]].push(elements[i].id);\n      used += 1;\n    }\n  }\n\n  if (total === used) {\n    final(true);\n  }\n\n  localStorage.setItem('inProgressRecipes', JSON.stringify(localSAtual));\n}\n\nfunction InputCheck(props) {\n  const {\n    item,\n    action,\n    details,\n    setDone\n  } = props;\n\n  if (!item.checked) {\n    return /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      className: \"ingredient-step\",\n      id: item.ingrediente,\n      onClick: () => {\n        action(details, setDone);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 7\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"input\", {\n    type: \"checkbox\",\n    className: \"ingredient-step\",\n    id: item.ingrediente,\n    onClick: () => {\n      action(details, setDone);\n    },\n    checked: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 5\n    }\n  });\n}\n\nInputCheck.propTypes = {\n  item: propTypes.instanceOf(Object).isRequired,\n  action: propTypes.func.isRequired,\n  details: propTypes.instanceOf(Object).isRequired,\n  setDone: propTypes.func.isRequired\n};\n\nfunction moveToDone(details) {\n  const {\n    type,\n    chave\n  } = createBasicLocal(details);\n  const localSAtual = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  delete localSAtual[chave][details[`id${type}`]];\n  localStorage.setItem('inProgressRecipes', JSON.stringify(localSAtual));\n  const temp = convertFoodDone(details, type);\n\n  if (localStorage.getItem('doneRecipes') === null) {\n    localStorage.setItem('doneRecipes', JSON.stringify([]));\n  }\n\n  const doneAtual = JSON.parse(localStorage.getItem('doneRecipes'));\n  doneAtual.push(temp);\n  console.log('Local Storage', doneAtual);\n  localStorage.setItem('doneRecipes', JSON.stringify(doneAtual));\n}\n\nfunction Botao(props) {\n  const {\n    habilita,\n    details\n  } = props;\n  return /*#__PURE__*/React.createElement(Link, {\n    to: '/receitas-feitas',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    \"data-testid\": \"finish-recipe-btn\",\n    className: \"finish-recipe-btn\",\n    disabled: !habilita,\n    onClick: () => moveToDone(details),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }, \"Finalizar receita\"));\n}\n\nBotao.propTypes = {\n  habilita: propTypes.bool.isRequired,\n  details: propTypes.instanceOf(Object).isRequired\n};\nexport default function Detalhes(props) {\n  const {\n    details,\n    favoriteRecipes\n  } = props;\n  const [used, setDone] = useState(false);\n  console.log(used);\n  const [copy, copiador] = useState(false);\n  const [favority, setFavority] = useState(false);\n  useEffect(() => setFavority(favoriteRecipes), []);\n  const [usedIngredients, setUsed] = useState([]);\n  const novosIngredientes = funcIngredients([], details);\n  useEffect(() => setUsed(updateUsedIngredients(details, setDone, novosIngredientes)), []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 5\n    }\n  }, fotoPrincipal(details), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"DetelhesBuddy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }\n  }, funcLinks(details, favority, setFavority, copiador, copy), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"recipe-category\",\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 9\n    }\n  }, details.strCategory), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"subTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  }, \"Ingredients\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"yellowCampProcesso\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }, novosIngredientes.map(item => /*#__PURE__*/React.createElement(\"div\", {\n    \"data-testid\": \"0-ingredient-step\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputCheck, {\n    item: item,\n    used: usedIngredients,\n    action: changeStorage,\n    details: details,\n    setDone: setDone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: item.ingrediente,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 15\n    }\n  }, item.ingrediente, \"- \", item.quantidade)))), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"subTitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }\n  }, \"Instructions:\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"yellowCampProcesso\",\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }\n  }, details.strInstructions)), /*#__PURE__*/React.createElement(Botao, {\n    habilita: novosIngredientes.every(el => el.checked),\n    details: details,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }\n  }));\n}\nDetalhes.propTypes = {\n  details: propTypes.instanceOf(Object).isRequired,\n  favoriteRecipes: propTypes.func.isRequired\n};","map":{"version":3,"sources":["/home/paulo/Projects_myself/JS/sd-05-recipes-app-11-base/src/Components/NewProcesso.jsx"],"names":["React","useState","useEffect","Link","propTypes","convertFoodDone","fotoPrincipal","addFavorite","convertFavorite","details","setFavority","type","idMeal","saida","id","category","strCategory","alcoholicOrNot","name","image","area","strArea","undefined","CopyURL","endereco","window","location","toString","index","indexOf","navigator","clipboard","writeText","substring","funcLinks","favority","copiador","copy","title","strMeal","strDrink","blackHeart","whiteHeart","shareIcon","createBasicLocal","chave","localStorage","getItem","setItem","JSON","stringify","meals","cocktails","teste","localSAtual","parse","ingredientes","funcIngredientsChecks","used","i","includes","funcIngredients","ingredients","detalhes","push","ingrediente","quantidade","checked","updateUsedIngredients","setDone","novosIngredientes","length","changeStorage","final","console","log","elements","document","getElementsByClassName","total","InputCheck","props","item","action","instanceOf","Object","isRequired","func","moveToDone","temp","doneAtual","Botao","habilita","bool","Detalhes","favoriteRecipes","usedIngredients","setUsed","map","strInstructions","every","el"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport propTypes from 'prop-types';\nimport blackHeart from '../images/blackHeartIcon.svg';\nimport whiteHeart from '../images/whiteHeartIcon.svg';\nimport shareIcon from '../images/shareIcon.svg';\nimport '../CSS/TelaReceitaProcesso.css';\nimport { convertFoodDone } from './DetalhesComida';\nimport { fotoPrincipal, addFavorite } from './NewProcessoFunctions';\n\nexport function convertFavorite(details, setFavority) {\n  let type = 'Drink';\n\n  if (details.idMeal) {\n    type = 'Meal';\n  }\n  const saida = {\n    id: details[`id${type}`],\n    type: type === 'Drink' ? 'bebida' : 'comida',\n    category: details.strCategory,\n    alcoholicOrNot: type === 'Meal' ? '' : 'Alcoholic',\n    name: details[`str${type}`],\n    image: details[`str${type}Thumb`],\n    area: details.strArea !== undefined ? details.strArea : '',\n  };\n  addFavorite(saida, setFavority);\n  return saida;\n}\n// HA https://www.codegrepper.com/code-examples/basic/copy+string+to+clipboard+javascript\nexport function CopyURL() {\n  const endereco = window.location.toString();\n  const index = endereco.indexOf('/in-progress');\n  window.navigator.clipboard.writeText(endereco.substring(0, index));\n}\n\nfunction funcLinks(details, favority, setFavority, copiador, copy) {\n  let title = details.strMeal;\n  if (details.strDrink) title = details.strDrink;\n  return (\n    <div className=\"campoTitle\">\n      <h1 className=\"recipe-title\" data-testid=\"recipe-title\">\n        {title}\n      </h1>\n      <Link onClick={() => convertFavorite(details, setFavority)}>\n        <img\n          src={favority ? blackHeart : whiteHeart} alt=\"like icon\"\n          className=\"icon\" data-testid=\"favorite-btn\"\n        />\n      </Link>\n      <Link\n        onClick={() => {\n          copiador(true);\n          CopyURL();\n        }}\n      >\n        <img src={shareIcon} alt=\"like icon\" className=\"icon\" data-testid={'share-btn'} />\n      </Link>\n      {copy ? <span>Link copiado!</span> : null}\n    </div>\n  );\n}\n\nfunction createBasicLocal(details) {\n  const type = details.idMeal ? 'Meal' : 'Drink';\n  const chave = details.idMeal ? 'meals' : 'cocktails';\n  if (localStorage.getItem('inProgressRecipes') === null) {\n    localStorage.setItem('inProgressRecipes', JSON.stringify({ meals: {}, cocktails: {} }));\n  }\n  return { type, chave };\n}\n\nfunction teste(details) {\n  const { type, chave } = createBasicLocal(details);\n  const localSAtual = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  if (!localSAtual[chave][details[`id${type}`]]) return [];\n  const ingredientes = localSAtual[chave][details[`id${type}`]];\n  return ingredientes;\n}\nfunction funcIngredientsChecks(used, details, i) {\n  return used.includes(details[`strIngredient${i}`]);\n}\nexport function funcIngredients(ingredients, detalhes) {\n  const used = teste(detalhes);\n  for (let i = 1; i < 20; i += 1) {\n    if (\n      detalhes[`strIngredient${i}`] !== null && detalhes[`strIngredient${i}`] !== '' &&\n      detalhes[`strIngredient${i}`] !== undefined\n    ) {\n      ingredients.push({\n        ingrediente: detalhes[`strIngredient${i}`],\n        quantidade: detalhes[`strMeasure${i}`],\n        checked: funcIngredientsChecks(used, detalhes, i),\n      });\n    }\n  }\n  return ingredients;\n}\n\nfunction updateUsedIngredients(details, setDone, novosIngredientes) {\n  const { type, chave } = createBasicLocal(details);\n  const localSAtual = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  if (!localSAtual[chave][details[`id${type}`]]) return [];\n  const ingredientes = localSAtual[chave][details[`id${type}`]];\n\n  if (ingredientes.length === novosIngredientes.length) {\n    setDone(true);\n  }\n  return ingredientes;\n}\n\nfunction changeStorage(details, final) {\n  const { type, chave } = createBasicLocal(details);\n  const localSAtual = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  console.log(localSAtual[chave][details[`id${type}`]]);\n  const elements = document.getElementsByClassName('ingredient-step');\n  localSAtual[chave][details[`id${type}`]] = [];\n\n  let total = 0;\n  let used = 0;\n  for (let i = 0; i < elements.length; i += 1) {\n    total += 1;\n    if (elements[i].checked === true) {\n      localSAtual[chave][details[`id${type}`]].push(elements[i].id);\n      used += 1;\n    }\n  }\n  if (total === used) {\n    final(true);\n  }\n  localStorage.setItem('inProgressRecipes', JSON.stringify(localSAtual));\n}\n\nfunction InputCheck(props) {\n  const { item, action, details, setDone } = props;\n  if (!item.checked) {\n    return (\n      <input\n        type=\"checkbox\" className=\"ingredient-step\" id={item.ingrediente}\n        onClick={() => {\n          action(details, setDone);\n        }}\n      />\n    );\n  }\n  return (\n    <input\n      type=\"checkbox\" className=\"ingredient-step\" id={item.ingrediente}\n      onClick={() => {\n        action(details, setDone);\n      }} checked\n    />\n  );\n}\nInputCheck.propTypes = {\n  item: propTypes.instanceOf(Object).isRequired,\n  action: propTypes.func.isRequired,\n  details: propTypes.instanceOf(Object).isRequired,\n  setDone: propTypes.func.isRequired,\n};\n\nfunction moveToDone(details) {\n  const { type, chave } = createBasicLocal(details);\n  const localSAtual = JSON.parse(localStorage.getItem('inProgressRecipes'));\n  delete localSAtual[chave][details[`id${type}`]];\n  localStorage.setItem('inProgressRecipes', JSON.stringify(localSAtual));\n  const temp = convertFoodDone(details, type);\n  if (localStorage.getItem('doneRecipes') === null) {\n    localStorage.setItem('doneRecipes', JSON.stringify([]));\n  }\n  const doneAtual = JSON.parse(localStorage.getItem('doneRecipes'));\n  doneAtual.push(temp);\n  console.log('Local Storage', doneAtual);\n\n  localStorage.setItem('doneRecipes', JSON.stringify(doneAtual));\n}\n\nfunction Botao(props) {\n  const { habilita, details } = props;\n  return (\n    <Link to={'/receitas-feitas'}>\n      <button\n        data-testid=\"finish-recipe-btn\" className=\"finish-recipe-btn\"\n        disabled={!habilita} onClick={() => moveToDone(details)}\n      >\n        Finalizar receita\n      </button>\n    </Link>\n  );\n}\nBotao.propTypes = {\n  habilita: propTypes.bool.isRequired,\n  details: propTypes.instanceOf(Object).isRequired,\n};\n\nexport default function Detalhes(props) {\n  const { details, favoriteRecipes } = props;\n  const [used, setDone] = useState(false);\n  console.log(used);\n  const [copy, copiador] = useState(false);\n  const [favority, setFavority] = useState(false);\n  useEffect(() => setFavority(favoriteRecipes), []);\n  const [usedIngredients, setUsed] = useState([]);\n  const novosIngredientes = funcIngredients([], details);\n  useEffect(() => setUsed(updateUsedIngredients(details, setDone, novosIngredientes)), []);\n  return (\n    <div>\n      {fotoPrincipal(details)}\n      <div className=\"DetelhesBuddy\">\n        {funcLinks(details, favority, setFavority, copiador, copy)}\n        <h5 className=\"recipe-category\" data-testid=\"recipe-category\">\n          {details.strCategory}\n        </h5>\n        <h3 className=\"subTitle\">Ingredients</h3>\n        <ul className=\"yellowCampProcesso\">\n          {novosIngredientes.map((item) => (\n            <div data-testid=\"0-ingredient-step\">\n              <InputCheck\n                item={item} used={usedIngredients} action={changeStorage}\n                details={details} setDone={setDone}\n              />\n              <label htmlFor={item.ingrediente}>\n                {item.ingrediente}- {item.quantidade}\n              </label>\n            </div>\n          ))}\n        </ul>\n        <h3 className=\"subTitle\">Instructions:</h3>\n        <p className=\"yellowCampProcesso\" data-testid=\"instructions\">\n          {details.strInstructions}\n        </p>\n      </div>\n      <Botao habilita={novosIngredientes.every((el) => el.checked)} details={details} />\n    </div>\n  );\n}\n\nDetalhes.propTypes = {\n  details: propTypes.instanceOf(Object).isRequired,\n  favoriteRecipes: propTypes.func.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}