{"ast":null,"code":"var _jsxFileName = \"/home/paulo/Projects_myself/JS/sd-05-recipes-app-11-base/src/Pages/TelaPrincipal.jsx\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect } from 'react-router-dom';\nimport MenuInferior from '../Components/MenuInferior';\nimport BarraBuscaHeader from '../Components/Barra de Busca - Header/BarraBuscaHeader';\nimport ListReceitas from '../Components/ListReceitas';\nimport ReceitasContext from '../Context/ReceitasContext';\nimport { ApiSearchMealByName, searchMealByCategory, searchMealCategory } from '../Services/ApiComida';\nimport { searchCockTailByCategory, searchCockTailByName, searchCockTailCategory } from '../Services/ApiBebida';\nimport '../CSS/TelaPrincipal.css';\n\nfunction TemReceira(receitas, tipo, id, automaticRedirection) {\n  if (typeof receitas !== 'object' || !receitas) return null;\n\n  if (receitas.length === 1 && automaticRedirection) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: `/${tipo}/${receitas[0][id]}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 12\n      }\n    });\n  } else if (receitas.length === 0) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ListReceitas, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }));\n}\n\nasync function filterButton(setCategorias, tipo) {\n  if (tipo === 'comidas') {\n    await searchMealCategory().then(el => setCategorias(['All', ...el.filter((_, i) => i < 5).map(e => e.strCategory)]));\n  } else {\n    await searchCockTailCategory().then(el => setCategorias(['All', ...el.filter((_, i) => i < 5).map(e => e.strCategory)]));\n  }\n}\n\nfunction receitasBasicas(setReceitas, tipo) {\n  if (tipo === 'comidas') {\n    ApiSearchMealByName('').then(el => setReceitas(el));\n  } else {\n    searchCockTailByName('').then(el => setReceitas(el));\n  }\n}\n\nfunction filtraCategoria(tipo, selecCat, setReceitas) {\n  if (tipo === 'comidas') {\n    searchMealByCategory(selecCat).then(el => {\n      setReceitas(el);\n    });\n  } else {\n    searchCockTailByCategory(selecCat).then(el => setReceitas(el));\n  }\n}\n\nfunction updateClicks(selecCat, setReceitas, tipo) {\n  if (selecCat === '') {\n    receitasBasicas(setReceitas, tipo);\n  } else {\n    filtraCategoria(tipo, selecCat, setReceitas);\n  }\n}\n\nexport default function TelaPrincipal(props) {\n  const {\n    receitas,\n    setReceitas,\n    redirecionado,\n    setRedirecionado\n  } = useContext(ReceitasContext);\n  const [categorias, setCategorias] = useState([]);\n  const [selecCat, setSelecCat] = useState('');\n  const [automatic, setAutomatic] = useState(false);\n  const tipo = /comida/.test(props.match.path) ? 'comidas' : 'bebidas';\n  const id = tipo === 'comidas' ? 'idMeal' : 'idDrink';\n  useEffect(() => {\n    if (!redirecionado) {\n      receitasBasicas(setReceitas, tipo);\n    }\n\n    filterButton(setCategorias, tipo);\n  }, [tipo]);\n  useEffect(() => {\n    if (!redirecionado) {\n      updateClicks(selecCat, setReceitas, tipo);\n    }\n\n    setRedirecionado(false);\n  }, [selecCat, tipo]);\n  useEffect(() => () => setSelecCat(''), [tipo]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BarraBuscaHeader, {\n    title: tipo,\n    automatic: setAutomatic,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bottonBlock\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, categorias.map(el => /*#__PURE__*/React.createElement(\"button\", {\n    onClick: e => {\n      if (e.target.innerText === 'All' || e.target.innerText === selecCat) {\n        setSelecCat('');\n      } else {\n        setSelecCat(e.target.innerText);\n      }\n    },\n    \"data-testid\": `${el}-category-filter`,\n    className: \"yellowPrincipal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, el))), TemReceira(receitas, tipo, id, automatic), /*#__PURE__*/React.createElement(MenuInferior, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }));\n}\nTelaPrincipal.propTypes = {\n  match: PropTypes.objectOf(PropTypes.object).isRequired\n};","map":{"version":3,"sources":["/home/paulo/Projects_myself/JS/sd-05-recipes-app-11-base/src/Pages/TelaPrincipal.jsx"],"names":["React","useContext","useState","useEffect","PropTypes","Redirect","MenuInferior","BarraBuscaHeader","ListReceitas","ReceitasContext","ApiSearchMealByName","searchMealByCategory","searchMealCategory","searchCockTailByCategory","searchCockTailByName","searchCockTailCategory","TemReceira","receitas","tipo","id","automaticRedirection","length","filterButton","setCategorias","then","el","filter","_","i","map","e","strCategory","receitasBasicas","setReceitas","filtraCategoria","selecCat","updateClicks","TelaPrincipal","props","redirecionado","setRedirecionado","categorias","setSelecCat","automatic","setAutomatic","test","match","path","target","innerText","propTypes","objectOf","object","isRequired"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect } from 'react-router-dom';\nimport MenuInferior from '../Components/MenuInferior';\nimport BarraBuscaHeader from '../Components/Barra de Busca - Header/BarraBuscaHeader';\nimport ListReceitas from '../Components/ListReceitas';\nimport ReceitasContext from '../Context/ReceitasContext';\nimport {\n  ApiSearchMealByName,\n  searchMealByCategory,\n  searchMealCategory,\n} from '../Services/ApiComida';\nimport {\n  searchCockTailByCategory,\n  searchCockTailByName,\n  searchCockTailCategory,\n} from '../Services/ApiBebida';\nimport '../CSS/TelaPrincipal.css';\n\nfunction TemReceira(receitas, tipo, id, automaticRedirection) {\n  if (typeof receitas !== 'object' || !receitas) return null;\n  if (receitas.length === 1 && automaticRedirection) {\n    return <Redirect to={`/${tipo}/${receitas[0][id]}`} />;\n  } else if (receitas.length === 0) {\n    return null;\n  }\n  return (\n    <div>\n      <ListReceitas />\n    </div>\n  );\n}\nasync function filterButton(setCategorias, tipo) {\n  if (tipo === 'comidas') {\n    await searchMealCategory().then((el) =>\n      setCategorias(['All', ...el.filter((_, i) => i < 5).map((e) => e.strCategory)]),\n    );\n  } else {\n    await searchCockTailCategory().then((el) =>\n      setCategorias(['All', ...el.filter((_, i) => i < 5).map((e) => e.strCategory)]),\n    );\n  }\n}\nfunction receitasBasicas(setReceitas, tipo) {\n  if (tipo === 'comidas') {\n    ApiSearchMealByName('').then((el) => setReceitas(el));\n  } else {\n    searchCockTailByName('').then((el) => setReceitas(el));\n  }\n}\nfunction filtraCategoria(tipo, selecCat, setReceitas) {\n  if (tipo === 'comidas') {\n    searchMealByCategory(selecCat).then((el) => {\n      setReceitas(el);\n    });\n  } else {\n    searchCockTailByCategory(selecCat).then((el) => setReceitas(el));\n  }\n}\nfunction updateClicks(selecCat, setReceitas, tipo) {\n  if (selecCat === '') {\n    receitasBasicas(setReceitas, tipo);\n  } else {\n    filtraCategoria(tipo, selecCat, setReceitas);\n  }\n}\nexport default function TelaPrincipal(props) {\n  \n  const { receitas, setReceitas, redirecionado, setRedirecionado } = useContext(ReceitasContext);\n  const [categorias, setCategorias] = useState([]);\n  const [selecCat, setSelecCat] = useState('');\n  const [automatic, setAutomatic] = useState(false);\n  const tipo = /comida/.test(props.match.path) ? 'comidas' : 'bebidas';\n  const id = tipo === 'comidas' ? 'idMeal' : 'idDrink';\n  useEffect(() => {\n    if (!redirecionado) {\n      receitasBasicas(setReceitas, tipo);\n    }\n    filterButton(setCategorias, tipo);\n  }, [tipo]);\n  useEffect(() => {\n    if (!redirecionado) {\n      updateClicks(selecCat, setReceitas, tipo);\n    }\n    setRedirecionado(false);\n  }, [selecCat, tipo]);\n  useEffect(() => () => setSelecCat(''), [tipo]);\n  return (\n    <div>\n      <BarraBuscaHeader title={tipo} automatic={setAutomatic} />\n      <div className=\"bottonBlock\">\n        {categorias.map((el) => (\n          <button\n            onClick={(e) => {\n              if (e.target.innerText === 'All' || e.target.innerText === selecCat) {\n                setSelecCat('');\n              } else {\n                setSelecCat(e.target.innerText);\n              }\n            }}\n            data-testid={`${el}-category-filter`}\n            className=\"yellowPrincipal\"\n          >\n            {el}\n          </button>\n        ))}\n      </div>\n      {TemReceira(receitas, tipo, id, automatic)}\n      <MenuInferior />\n    </div>\n  );\n}\n\nTelaPrincipal.propTypes = {\n  match: PropTypes.objectOf(PropTypes.object).isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}